
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema 3: Funciones y Custom Properties - Apuntes CSS</title>
    <meta name="description" content="Funciones CSS: var(), calc(), min(), max(), clamp(), funciones matemáticas y @property.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="icon" type="image/png" href="../favicon.ico">
</head>
<body class="bg-gray-100 text-gray-800 font-sans text-sm leading-relaxed">

    <header class="bg-gradient-to-br from-amber-900 to-amber-800 text-white sticky top-0 z-50 shadow-md">
        <div class="max-w-6xl mx-auto px-5 py-3 flex items-center justify-between gap-4">
            <a href="../index.html#css" class="flex items-center gap-2 text-white no-underline hover:opacity-80">
                <span class="bg-white/20 px-3 py-1 rounded font-bold text-lg">CSS</span>
            </a>
            <h1 class="flex-1 text-lg font-semibold truncate">Tema 3: Funciones y Custom Properties</h1>
            <div class="relative tema-dropdown">
                <button class="flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded text-sm font-medium transition-colors">
                    <span>Temas</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="tema-dropdown-menu absolute right-0 top-full mt-1 bg-white rounded-lg shadow-xl border border-gray-200 py-2 min-w-64 max-h-96 overflow-y-auto hidden">
                    <div class="px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-b border-gray-100">Temas CSS</div>
                    <a href="tema1-conceptos.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">1. Conceptos CSS</a>
                    <a href="tema2-pseudos.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">2. Pseudo-elementos y Pseudo-clases</a>
                    <a href="tema3-funciones.html" class="block px-4 py-2 text-sm text-amber-900 bg-amber-50 font-medium">3. Funciones y Custom Properties</a>
                    <a href="tema4-color-unidades.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">4. Color y Unidades</a>
                    <a href="tema5-box-model.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">5. Modelo de Caja</a>
                    <a href="tema6-layout.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">6. Layout: Flexbox y Grid</a>
                    <a href="tema7-posicionamiento.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">7. Posicionamiento y Espaciado</a>
                    <a href="tema8-interacciones.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">8. Interacciones y Scroll</a>
                    <a href="tema9-texto.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">9. Texto y Tipografía</a>
                    <a href="tema10-graficos.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">10. Formas y Gráficos</a>
                    <a href="tema11-animaciones.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">11. CSS Dinámico</a>
                    <a href="tema12-rwd.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">12. RWD y Accesibilidad</a>
                    <div class="border-t border-gray-100 mt-2 pt-2">
                        <a href="../index.html" class="block px-4 py-2 text-sm text-amber-900 hover:bg-amber-50 font-medium">&larr; Volver al índice</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <nav class="bg-white border-b border-gray-200 px-5 py-2.5 max-w-6xl mx-auto">
        <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">En este tema</p>
        <div class="flex flex-wrap gap-1.5">
            <a href="#custom-properties" class="text-xs px-2.5 py-1 bg-amber-50 text-amber-900 rounded-full hover:bg-amber-100 no-underline border border-amber-200">Custom Properties</a>
            <a href="#calc" class="text-xs px-2.5 py-1 bg-amber-50 text-amber-900 rounded-full hover:bg-amber-100 no-underline border border-amber-200">calc()</a>
            <a href="#min-max-clamp" class="text-xs px-2.5 py-1 bg-amber-50 text-amber-900 rounded-full hover:bg-amber-100 no-underline border border-amber-200">min/max/clamp</a>
            <a href="#tipografia-fluida" class="text-xs px-2.5 py-1 bg-amber-50 text-amber-900 rounded-full hover:bg-amber-100 no-underline border border-amber-200">Escalas y Fluidez</a>
            <a href="#matematicas" class="text-xs px-2.5 py-1 bg-amber-50 text-amber-900 rounded-full hover:bg-amber-100 no-underline border border-amber-200">Matemáticas</a>
            <a href="#at-property" class="text-xs px-2.5 py-1 bg-amber-50 text-amber-900 rounded-full hover:bg-amber-100 no-underline border border-amber-200">@property</a>
            <a href="#otras-funciones" class="text-xs px-2.5 py-1 bg-amber-50 text-amber-900 rounded-full hover:bg-amber-100 no-underline border border-amber-200">Otras funciones</a>
        </div>
    </nav>

    <main class="flex flex-wrap gap-4 p-5 max-w-6xl mx-auto overflow-x-hidden">

        <section id="custom-properties" class="bg-white rounded-lg p-4 shadow w-full">
            <h2 class="text-xl font-bold text-amber-900 border-b-2 border-amber-900 pb-1 mb-3">
                <span class="orden">1</span>Custom Properties (Variables CSS)
            </h2>
            <p class="text-sm mb-2 italic text-amber-700">Propiedades personalizadas que almacenan valores reutilizables. A diferencia de SASS, estas se resuelven en el navegador y respetan la cascada en tiempo real.</p>
            <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded mb-3 text-sm">
                <p class="font-semibold text-amber-900 mb-1">Definici&oacute;n:</p>
                <p class="text-gray-700 break-words">Las <strong>Custom Properties</strong> (tambi&eacute;n llamadas variables CSS) son entidades definidas por el autor que contienen valores espec&iacute;ficos reutilizables a lo largo de un documento. Se declaran usando la notaci&oacute;n <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">--nombre-variable: valor</code> y se acceden mediante la funci&oacute;n <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">var()</code>. A diferencia de las variables de preprocesadores (SASS/LESS), las Custom Properties son <strong>din&aacute;micas</strong>: existen en el DOM, participan en la cascada CSS, se heredan por hijos, y pueden ser modificadas en tiempo de ejecuci&oacute;n con JavaScript o media queries.</p>
            </div>
            <div class="bg-gray-50 border border-gray-200 p-3 rounded mb-3 text-xs text-gray-600">
                <p class="font-semibold text-gray-800 mb-1">Caracter&iacute;sticas clave:</p>
                <ul class="list-disc pl-5 space-y-1">
                    <li><strong>Cascada:</strong> Siguen las reglas normales de especificidad y herencia de CSS.</li>
                    <li><strong>Scope:</strong> Se aplican al selector donde se declaran y se heredan a todos sus descendientes.</li>
                    <li><strong>Din&aacute;micas:</strong> Pueden cambiar en respuesta a estados (:hover, :focus), media queries, o manipulaci&oacute;n con JS.</li>
                    <li><strong>Composici&oacute;n:</strong> Se pueden combinar dentro de <code class="bg-gray-800 text-gray-100 px-1 rounded font-mono">calc()</code> y otras funciones CSS.</li>
                    <li><strong>Valor inv&aacute;lido:</strong> Si una variable contiene un valor inv&aacute;lido para la propiedad donde se usa, la propiedad toma su valor heredado (no el fallback).</li>
                </ul>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <h3 class="font-semibold text-amber-800 mb-2">Definición y uso</h3>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Definir variables globales */
:root {
    --color-primary: #3b82f6;
    --color-secondary: #10b981;
    --spacing-unit: 8px;
    --font-main: 'Inter', sans-serif;
}

/* Usar variables */
.button {
    background: var(--color-primary);
    padding: var(--spacing-unit);
    font-family: var(--font-main);
}</pre>
                </div>
                <div>
                    <h3 class="font-semibold text-amber-800 mb-2">Valor por defecto (fallback)</h3>
                    <p class="text-xs text-gray-500 mb-2 italic">El segundo argumento se activa si la variable no existe.</p>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Si --accent no existe, usa blue */
.element {
    color: var(--accent, blue);
}

/* Fallback encadenado */
.element {
    color: var(--brand, var(--accent, blue));
}</pre>
                </div>
            </div>

            <h3 class="font-semibold text-amber-800 mt-4 mb-2">Alcance (scope) de variables</h3>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">:root {
    --bg: white;  /* Global */
}

.dark-theme {
    --bg: #1a1a1a;  /* Sobrescribe en este ámbito */
}

.card {
    background: var(--bg);  /* Hereda según contexto */
}</pre>

            <h3 class="font-semibold text-amber-800 mt-4 mb-2">Manipulación con JavaScript</h3>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">// Leer variable
getComputedStyle(document.documentElement)
    .getPropertyValue('--color-primary');

// Escribir variable
document.documentElement.style
    .setProperty('--color-primary', '#ff0000');</pre>
        </section>

        <section id="calc" class="bg-white rounded-lg p-4 shadow basis-full md:basis-[calc(50%-0.5rem)] min-w-0">
            <h2 class="text-xl font-bold text-amber-900 border-b-2 border-amber-900 pb-1 mb-3">
                <span class="orden">2</span>calc()
            </h2>
            <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded mb-3 text-sm">
                <p class="font-semibold text-amber-900 mb-1">Definici&oacute;n:</p>
                <p class="text-gray-700 break-words">La funci&oacute;n <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">calc()</code> permite realizar <strong>operaciones aritm&eacute;ticas</strong> directamente en los valores de las propiedades CSS. Su principal ventaja es que puede <strong>mezclar unidades diferentes</strong> (px, %, rem, vw, etc.) en una misma expresi&oacute;n, algo imposible con valores est&aacute;ticos. El navegador resuelve el c&aacute;lculo en tiempo de renderizado, lo que la hace ideal para layouts adaptativos donde se combinan medidas fijas y relativas.</p>
            </div>

            <ul class="list-disc pl-5 space-y-1 text-sm mb-3">
                <li>Operadores: <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">+</code> <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">-</code> <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">*</code> <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">/</code></li>
                <li class="text-red-700 font-semibold italic underline">Importante: Espacios obligatorios alrededor de + y -</li>
                <li>Puede mezclar %, px, em, rem, vw, vh...</li>
                <li>Se puede anidar: <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">calc(calc(...) + calc(...))</code></li>
                <li>Compatible con variables: <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">calc(var(--x) * 2)</code></li>
                <li>En <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">*</code> y <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">/</code>, al menos uno de los operandos debe ser un <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">&lt;number&gt;</code> sin unidad</li>
            </ul>

            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">.sidebar {
    width: calc(100% - 250px);
}

.container {
    padding: calc(var(--spacing) * 2);
    max-width: calc(100vw - 2rem);
}

.grid-item {
    width: calc((100% - 3 * 20px) / 4);
}</pre>
        </section>

        <section id="min-max-clamp" class="bg-white rounded-lg p-4 shadow basis-full md:basis-[calc(50%-0.5rem)] min-w-0">
            <h2 class="text-xl font-bold text-amber-900 border-b-2 border-amber-900 pb-1 mb-3">
                <span class="orden">3</span>min(), max() y clamp()
            </h2>
            <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded mb-3 text-sm">
                <p class="font-semibold text-amber-900 mb-1">Definici&oacute;n:</p>
                <p class="text-gray-700 break-words">Las <strong>funciones de comparaci&oacute;n</strong> permiten que el navegador elija autom&aacute;ticamente entre varios valores seg&uacute;n el contexto de renderizado. Sustituyen muchos usos de media queries al crear valores que se adaptan de forma fluida al espacio disponible. Aceptan dos o m&aacute;s argumentos separados por comas, y cada argumento puede ser una expresi&oacute;n con <code class="bg-gray-800 text-gray-100 px-1 rounded text-xs font-mono">calc()</code>.</p>
            </div>

            <h3 class="font-semibold text-amber-800 mb-2 text-sm">min() &mdash; &ldquo;No pases de este valor&rdquo;</h3>
            <p class="text-xs text-gray-600 mb-1"><strong>Devuelve el valor m&aacute;s peque&ntilde;o</strong> de la lista de argumentos. En la pr&aacute;ctica, funciona como un <em>tope m&aacute;ximo</em>: el elemento crecer&aacute; hasta que alcance el l&iacute;mite fijo. Equivale a <code class="bg-gray-100 px-1 font-mono text-xs">max-width</code> pero se puede usar en cualquier propiedad.</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs mb-3">/* El ancho ser&aacute; 90% del padre, pero nunca mayor a 400px */
.card {
    width: min(400px, 90%);
}

/* Acepta m&uacute;ltiples argumentos */
.box { width: min(400px, 90%, 50vw); }</pre>

            <h3 class="font-semibold text-amber-800 mb-2 text-sm">max() &mdash; &ldquo;No seas menor que este valor&rdquo;</h3>
            <p class="text-xs text-gray-600 mb-1"><strong>Devuelve el valor m&aacute;s grande</strong> de la lista. Act&uacute;a como un <em>suelo m&iacute;nimo</em>: el elemento puede crecer libremente, pero nunca bajar&aacute; del l&iacute;mite fijo. Equivale a <code class="bg-gray-100 px-1 font-mono text-xs">min-width</code> en contexto gen&eacute;rico.</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs mb-3">/* El ancho ser&aacute; 25% del padre, pero nunca menor a 200px */
.sidebar {
    width: max(200px, 25%);
}</pre>

            <h3 class="font-semibold text-amber-800 mb-2 text-sm">clamp(min, ideal, max)</h3>
            <p class="text-xs text-gray-600 mb-2"><strong>Restringe un valor ideal entre un m&iacute;nimo y un m&aacute;ximo.</strong> Es equivalente a <code class="bg-gray-100 px-1 font-mono text-xs">max(MIN, min(IDEAL, MAX))</code>. El valor ideal suele ser una unidad relativa al viewport (vw) para lograr fluidez, mientras que min y max son unidades fijas que evitan extremos.</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Tipograf&iacute;a fluida: crece con el viewport entre 1.5rem y 3rem */
h1 {
    font-size: clamp(1.5rem, 4vw, 3rem);
}

/* Contenedor fluido */
.container {
    width: clamp(320px, 80%, 1200px);
}</pre>
        </section>

        <section id="tipografia-fluida" class="bg-white rounded-lg p-4 shadow w-full min-w-0">
            <h2 class="text-xl font-bold text-amber-900 border-b-2 border-amber-900 pb-1 mb-3">
                <span class="orden">4</span>Escalas y Tipografía Líquida
            </h2>
            <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded mb-3 text-sm">
                <p class="font-semibold text-amber-900 mb-1">Definici&oacute;n:</p>
                <p class="text-gray-700 break-words">La <strong>tipograf&iacute;a l&iacute;quida</strong> (fluid typography) es una t&eacute;cnica donde los tama&ntilde;os de fuente escalan proporcionalmente al ancho del viewport, sin saltos bruscos entre breakpoints. Se consigue combinando <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">clamp()</code> con una <strong>escala modular</strong>: un sistema donde cada tama&ntilde;o tipogr&aacute;fico se obtiene multiplicando el anterior por un ratio constante (ej. 1.25), creando una jerarqu&iacute;a visual arm&oacute;nica y matem&aacute;ticamente coherente.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-4 text-sm">
                <div class="min-w-0">
                    <h3 class="font-semibold text-amber-800 mb-2">Concepto de Escala Modular</h3>
                    <p class="text-xs text-gray-600 mb-2">Cada paso se obtiene multiplicando el anterior por un ratio fijo. Ratios comunes:</p>
                    <ul class="list-disc pl-5 mb-3 text-xs space-y-1 text-gray-600">
                        <li><strong>1.125</strong> (segunda mayor) &mdash; sutil, textos densos</li>
                        <li><strong>1.250</strong> (tercera mayor) &mdash; equilibrio general</li>
                        <li><strong>1.333</strong> (cuarta perfecta) &mdash; contraste medio</li>
                        <li><strong>1.618</strong> (proporci&oacute;n &aacute;urea) &mdash; contraste dram&aacute;tico</li>
                    </ul>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">:root {
  /* 2 variables de control */
  --base-size: 1rem;       /* Tama&ntilde;o inicial */
  --ratio: 1.25;           /* Multiplicador */

  /* Escala generada autom&aacute;ticamente */
  --step-0: var(--base-size);
  --step-1: calc(var(--step-0) * var(--ratio));  /* 1.25rem  */
  --step-2: calc(var(--step-1) * var(--ratio));  /* 1.563rem */
  --step-3: calc(var(--step-2) * var(--ratio));  /* 1.953rem */
  --step-4: calc(var(--step-3) * var(--ratio));  /* 2.441rem */
  --step--1: calc(var(--step-0) / var(--ratio)); /* 0.8rem   */
}</pre>
                    <div class="mt-3 bg-gray-50 p-3 rounded border border-gray-200 text-[10px] overflow-x-auto">
                        <p class="text-amber-900 font-semibold mb-1 uppercase tracking-wider">Cambia las variables y toda la escala se adapta:</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-1 text-gray-600 font-mono mt-2">
                            <span>--base-size: 1rem</span><span>--ratio: 1.25</span>
                            <span>--base-size: 1.125rem</span><span>--ratio: 1.333</span>
                        </div>
                    </div>
                    <div class="mt-3 bg-gray-50 p-3 rounded border border-gray-200 overflow-hidden">
                        <p class="text-[10px] text-amber-900 font-semibold mb-2 uppercase tracking-wider">Vista previa (base: 1rem, ratio: 1.25):</p>
                        <p style="font-size:0.8rem" class="text-gray-500 truncate">step-1: Peque&ntilde;o (0.8rem)</p>
                        <p style="font-size:1rem" class="text-gray-700 truncate">step-0: Texto base (1rem)</p>
                        <p style="font-size:1.25rem" class="text-gray-700 truncate">step+1: Subt&iacute;tulo (1.25rem)</p>
                        <p style="font-size:1.563rem" class="text-gray-700 truncate">step+2: T&iacute;tulo (1.56rem)</p>
                        <p style="font-size:1.953rem" class="text-gray-600 truncate">step+3: Heading (1.95rem)</p>
                    </div>
                </div>
                <div class="min-w-0">
                    <h3 class="font-semibold text-amber-800 mb-2">Aplicaci&oacute;n con Clamp (L&iacute;quido)</h3>
                    <p class="text-xs text-gray-600 mb-3">Combinamos escalas con <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">clamp()</code> para que la base crezca seg&uacute;n el viewport sin media queries.</p>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">:root {
  /* Variables de control */
  --base-size: 1rem;
  --ratio: 1.25;

  /* Base fluida: crece con el viewport */
  --fs-base: clamp(
    var(--base-size),              /* m&iacute;n: m&oacute;vil  */
    0.5vw + 0.875rem,             /* ideal: fluido */
    calc(var(--base-size) * 1.2)  /* m&aacute;x: desktop */
  );

  /* Escala completa basada en las 2 variables */
  --fs-sm:  calc(var(--fs-base) / var(--ratio));
  --fs-lg:  calc(var(--fs-base) * var(--ratio));
  --fs-xl:  calc(var(--fs-lg) * var(--ratio));
  --fs-2xl: calc(var(--fs-xl) * var(--ratio));
  --fs-3xl: calc(var(--fs-2xl) * var(--ratio));
}</pre>
                    <div class="mt-3 bg-gray-50 p-3 rounded border border-gray-200 text-xs">
                        <p class="text-amber-900 font-semibold mb-2">Comportamiento visual:</p>
                        <div class="flex items-end gap-2 mb-2">
                            <div class="text-center">
                                <div class="bg-amber-600 rounded" style="width:20px;height:30px"></div>
                                <span class="text-[9px] text-gray-500">375px</span>
                            </div>
                            <div class="text-center">
                                <div class="bg-amber-600 rounded" style="width:20px;height:40px"></div>
                                <span class="text-[9px] text-gray-500">768px</span>
                            </div>
                            <div class="text-center">
                                <div class="bg-amber-600 rounded" style="width:20px;height:50px"></div>
                                <span class="text-[9px] text-gray-500">1024px</span>
                            </div>
                            <div class="text-center">
                                <div class="bg-amber-600 rounded" style="width:20px;height:55px"></div>
                                <span class="text-[9px] text-gray-500">1440px</span>
                            </div>
                        </div>
                        <p class="text-gray-600">El tama&ntilde;o crece <em>gradualmente</em> entre m&iacute;nimo y m&aacute;ximo, sin saltos.</p>
                    </div>
                </div>
            </div>

        </section>

        <section id="matematicas" class="bg-white rounded-lg p-4 shadow w-full">
            <h2 class="text-xl font-bold text-amber-900 border-b-2 border-amber-900 pb-1 mb-3">
                <span class="orden">5</span>Funciones matemáticas avanzadas
            </h2>
            <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded mb-4 text-sm">
                <p class="font-semibold text-amber-900 mb-1">Definici&oacute;n:</p>
                <p class="text-gray-700">CSS incorpora funciones matem&aacute;ticas nativas (especificaci&oacute;n CSS Values Level 4) que permiten realizar c&aacute;lculos avanzados <strong>directamente en la hoja de estilos</strong>, sin depender de JavaScript ni preprocesadores. Estas funciones operan con &aacute;ngulos, n&uacute;meros y longitudes CSS, y son &uacute;tiles para layouts circulares, escalas din&aacute;micas, patrones repetitivos y ajustes a rejillas.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <h3 class="font-semibold text-amber-800 mb-2">Trigonom&eacute;tricas</h3>
                    <p class="text-xs text-gray-600 mb-2"><code class="bg-gray-100 px-1 font-mono">sin()</code>, <code class="bg-gray-100 px-1 font-mono">cos()</code>, <code class="bg-gray-100 px-1 font-mono">tan()</code> &mdash; Reciben un <code class="bg-gray-100 px-1 font-mono">&lt;angle&gt;</code> (deg, rad, turn) y devuelven un <code class="bg-gray-100 px-1 font-mono">&lt;number&gt;</code> entre -1 y 1. Inversas: <code class="bg-gray-100 px-1 font-mono">asin()</code>, <code class="bg-gray-100 px-1 font-mono">acos()</code>, <code class="bg-gray-100 px-1 font-mono">atan()</code>, <code class="bg-gray-100 px-1 font-mono">atan2(y, x)</code>.</p>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Distribuir 8 elementos en c&iacute;rculo */
.circle-item {
    --angle: calc(var(--i) * 45deg);
    --x: calc(cos(var(--angle)) * 120px);
    --y: calc(sin(var(--angle)) * 120px);
    transform: translate(var(--x), var(--y));
}</pre>
                    <!-- Visualizaci&oacute;n circular -->
                    <div class="mt-3 bg-gray-50 rounded-lg p-4 flex justify-center">
                        <div class="relative" style="width:140px;height:140px">
                            <div class="absolute rounded-full border-2 border-dashed border-amber-300" style="inset:0"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="top:0;left:50%;transform:translate(-50%,-50%)"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="top:15%;right:15%;transform:translate(50%,-50%)"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="top:50%;right:0;transform:translate(50%,-50%)"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="bottom:15%;right:15%;transform:translate(50%,50%)"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="bottom:0;left:50%;transform:translate(-50%,50%)"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="bottom:15%;left:15%;transform:translate(-50%,50%)"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="top:50%;left:0;transform:translate(-50%,-50%)"></div>
                            <div class="absolute w-3 h-3 bg-amber-600 rounded-full" style="top:15%;left:15%;transform:translate(-50%,-50%)"></div>
                            <p class="absolute inset-0 flex items-center justify-center text-[9px] text-gray-500 font-mono">cos/sin</p>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-amber-800 mb-2">Exponenciales</h3>
                    <p class="text-xs text-gray-600 mb-2"><code class="bg-gray-100 px-1 font-mono">pow(base, exp)</code> &mdash; potencia. <code class="bg-gray-100 px-1 font-mono">sqrt(x)</code> &mdash; ra&iacute;z cuadrada. <code class="bg-gray-100 px-1 font-mono">hypot(a, b)</code> &mdash; hipotenusa (&radic;a&sup2;+b&sup2;). <code class="bg-gray-100 px-1 font-mono">log(x)</code>, <code class="bg-gray-100 px-1 font-mono">exp(x)</code> &mdash; logaritmo natural y exponencial.</p>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Escala geom&eacute;trica: cada nivel crece &times;1.2 */
.scale {
    --factor: pow(1.2, var(--level));
    font-size: calc(1rem * var(--factor));
}
/* level=0 &rarr; 1rem, level=1 &rarr; 1.2rem,
   level=2 &rarr; 1.44rem, level=3 &rarr; 1.728rem */

/* Distancia entre dos puntos */
.line {
    width: hypot(var(--dx), var(--dy));
}</pre>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4 mt-4">
                <div>
                    <h3 class="font-semibold text-amber-800 mb-2 text-sm">Redondeo y Escalonado</h3>
                    <p class="text-xs text-gray-600 mb-2"><code class="bg-gray-100 px-1 font-mono">round(strategy, value, interval)</code> &mdash; redondea <em>value</em> al m&uacute;ltiplo m&aacute;s cercano de <em>interval</em>. Estrategias: <code class="bg-gray-100 px-1 font-mono">nearest</code> (defecto), <code class="bg-gray-100 px-1 font-mono">up</code>, <code class="bg-gray-100 px-1 font-mono">down</code>, <code class="bg-gray-100 px-1 font-mono">to-zero</code>.</p>
                    <p class="text-xs text-gray-600 mb-2"><code class="bg-gray-100 px-1 font-mono">mod(a, b)</code> &mdash; resto de divisi&oacute;n. <code class="bg-gray-100 px-1 font-mono">rem(a, b)</code> &mdash; similar pero mantiene signo del dividendo.</p>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Ajustar ancho a m&uacute;ltiplos de 100px */
.grid-item {
    width: round(nearest, 100%, 100px);
}

/* Patr&oacute;n c&iacute;clico: colores alternos */
.item {
    --cycle: mod(var(--i), 3);
}</pre>
                </div>
                <div>
                    <h3 class="font-semibold text-amber-800 mb-2 text-sm">Signo y Valor Absoluto</h3>
                    <p class="text-xs text-gray-600 mb-2"><code class="bg-gray-100 px-1 font-mono">abs(x)</code> &mdash; devuelve el valor absoluto (siempre positivo). <code class="bg-gray-100 px-1 font-mono">sign(x)</code> &mdash; devuelve -1, 0 o 1 seg&uacute;n el signo del argumento. &Uacute;tiles para normalizar valores din&aacute;micos.</p>
                    <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Siempre margen positivo */
.element {
    margin: abs(var(--offset));
}

/* Direcci&oacute;n del movimiento */
.arrow {
    /* -1 si negativo, 1 si positivo */
    scale: sign(var(--direction)) 1;
}</pre>
                    <div class="mt-3 bg-gray-50 p-2 rounded text-[10px] text-gray-600 font-mono">
                        <p>abs(-25px) &rarr; 25px</p>
                        <p>sign(-25px) &rarr; -1</p>
                        <p>sign(0) &rarr; 0</p>
                        <p>sign(50px) &rarr; 1</p>
                    </div>
                </div>
            </div>

            <div class="mt-4 bg-gray-50 p-3 rounded border border-gray-200">
                <p class="text-xs font-semibold text-amber-900 mb-1">Constante disponible:</p>
                <p class="text-xs text-gray-600"><code class="bg-gray-800 text-gray-100 px-1.5 rounded font-mono">infinity</code>, <code class="bg-gray-800 text-gray-100 px-1.5 rounded font-mono">-infinity</code>, <code class="bg-gray-800 text-gray-100 px-1.5 rounded font-mono">NaN</code>, <code class="bg-gray-800 text-gray-100 px-1.5 rounded font-mono">e</code> (2.718...) y <code class="bg-gray-800 text-gray-100 px-1.5 rounded font-mono">pi</code> (3.14159...) son valores nativos de CSS que se pueden usar directamente en expresiones.</p>
            </div>

        </section>

        <section id="at-property" class="bg-white rounded-lg p-4 shadow w-full">
            <h2 class="text-xl font-bold text-amber-900 border-b-2 border-amber-900 pb-1 mb-3">
                <span class="orden">6</span>@property (CSS Houdini)
            </h2>
            <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded mb-3 text-sm">
                <p class="font-semibold text-amber-900 mb-1">Definici&oacute;n:</p>
                <p class="text-gray-700 break-words">La regla <code class="bg-gray-800 text-gray-100 px-1.5 rounded text-xs font-mono">@property</code> (parte de la especificaci&oacute;n <strong>CSS Houdini</strong>) permite <strong>registrar formalmente</strong> una custom property declar&aacute;ndole un tipo de dato, un valor inicial y si se hereda o no. Esto es fundamental porque CSS normalmente trata las variables como cadenas de texto opacas: no sabe si <code class="bg-gray-100 px-1 rounded text-xs font-mono">--x</code> es un color, un &aacute;ngulo o un n&uacute;mero. Al registrarla, el motor CSS puede <strong>interpolar</strong> correctamente su valor, lo que permite <em>animar y transicionar</em> propiedades que antes eran imposibles (como gradientes).</p>
            </div>

            <h3 class="font-semibold text-amber-800 mb-2 text-sm">Estructura de @property</h3>
            <p class="text-xs text-gray-600 mb-2">La regla requiere 3 descriptores obligatorios:</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">@property --gradient-angle {
    syntax: "&lt;angle&gt;";     /* Tipo de dato esperado */
    initial-value: 0deg;   /* Valor por defecto (obligatorio) */
    inherits: false;       /* &iquest;Se hereda a los hijos? */
}</pre>

            <h3 class="font-semibold text-amber-800 mt-3 mb-2 text-sm">Ejemplo: Animar un gradiente</h3>
            <p class="text-xs text-gray-600 mb-2">Sin @property, <code class="bg-gray-100 px-1 rounded text-xs font-mono">transition</code> no puede interpolar gradientes. Con @property, animamos el &aacute;ngulo:</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">.box {
    background: linear-gradient(var(--gradient-angle), #f59e0b, #dc2626);
    transition: --gradient-angle 0.5s ease;
}

.box:hover { --gradient-angle: 180deg; }

/* Resultado visual:
   Normal:  &rarr; gradiente a 0&deg; (arriba a abajo)
   Hover:   &rarr; gradiente a 180&deg; (abajo a arriba)
   La transici&oacute;n es SUAVE, no un salto brusco */</pre>

            <h3 class="font-semibold text-amber-800 mt-3 mb-2 text-sm">Ejemplo: Animar color de fondo con variable</h3>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">@property --bg-color {
    syntax: "&lt;color&gt;";
    initial-value: #3b82f6;
    inherits: false;
}

.card {
    background: var(--bg-color);
    transition: --bg-color 0.3s;
}
.card:hover { --bg-color: #8b5cf6; }</pre>

            <h3 class="font-semibold text-amber-800 mt-3 mb-2 text-xs uppercase tracking-wider text-gray-500">Tipos de syntax disponibles</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs">
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;length&gt;</code> <span class="text-gray-500">&mdash; px, rem, em...</span>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;percentage&gt;</code> <span class="text-gray-500">&mdash; 50%, 100%...</span>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;color&gt;</code> <span class="text-gray-500">&mdash; #hex, rgb, hsl...</span>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;angle&gt;</code> <span class="text-gray-500">&mdash; deg, rad, turn...</span>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;number&gt;</code> <span class="text-gray-500">&mdash; 1.5, 0, -3...</span>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;integer&gt;</code> <span class="text-gray-500">&mdash; 1, 2, 3...</span>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;time&gt;</code> <span class="text-gray-500">&mdash; s, ms...</span>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                    <code class="font-mono text-amber-900">&lt;image&gt;</code> <span class="text-gray-500">&mdash; url(), gradient...</span>
                </div>
            </div>
        </section>

        <section id="otras-funciones" class="bg-white rounded-lg p-4 shadow w-full">
            <h2 class="text-xl font-bold text-amber-900 border-b-2 border-amber-900 pb-1 mb-3">
                <span class="orden">7</span>Otras funciones útiles
            </h2>

            <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded mb-3 text-sm">
                <p class="font-semibold text-amber-900 mb-1">Definici&oacute;n:</p>
                <p class="text-gray-700 break-words">Adem&aacute;s de las funciones de c&aacute;lculo y comparaci&oacute;n, CSS ofrece funciones especializadas para <strong>referenciar recursos</strong>, <strong>leer atributos del HTML</strong> y <strong>acceder a variables del entorno</strong> del navegador o dispositivo.</p>
            </div>

            <h3 class="font-semibold text-amber-800 mb-2 text-sm">url() e image()</h3>
            <p class="text-xs text-gray-600 mb-2"><code class="bg-gray-100 px-1 font-mono">url()</code> carga un recurso externo (imagen, fuente, etc.). <code class="bg-gray-100 px-1 font-mono">image()</code> es una versi&oacute;n avanzada que permite definir un <strong>color de fallback</strong> si la imagen falla, y soportar fragmentos de imagen.</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs mb-3">/* url() cl&aacute;sico */
.hero { background: url("banner.jpg") center/cover; }

/* image() con fallback de color */
.hero { background: image("photo.jpg", #1a1a2e); }

/* Cargar fuentes */
@font-face {
    font-family: "MiFuente";
    src: url("fuente.woff2") format("woff2");
}</pre>

            <h3 class="font-semibold text-amber-800 mb-2 text-sm">attr()</h3>
            <p class="text-xs text-gray-600 mb-2"><strong>Lee el valor de un atributo HTML</strong> del elemento y lo inyecta como contenido CSS. Actualmente solo funciona con la propiedad <code class="bg-gray-100 px-1 font-mono">content</code> en pseudoelementos. La especificaci&oacute;n Level 5 propone usarla en cualquier propiedad con tipo.</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs mb-3">/* Mostrar la URL de los enlaces al imprimir */
@media print {
    a::after { content: " (" attr(href) ")"; }
}

/* Tooltip con data-attribute */
&lt;span data-tooltip="Ayuda"&gt;Hover&lt;/span&gt;

[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    /* ... estilos del tooltip */
}</pre>
            <div class="bg-gray-50 border border-gray-200 p-2 rounded mb-3 text-[10px] text-gray-600">
                <strong>Resultado visual del tooltip:</strong>
                <div class="mt-1 inline-block relative">
                    <span class="bg-gray-200 px-2 py-0.5 rounded text-xs">Hover</span>
                    <span class="absolute -top-6 left-0 bg-gray-800 text-white px-2 py-0.5 rounded text-[9px] whitespace-nowrap">Ayuda</span>
                </div>
            </div>

            <h3 class="font-semibold text-amber-800 mb-2 text-sm">env()</h3>
            <p class="text-xs text-gray-600 mb-2"><strong>Accede a variables de entorno</strong> definidas por el navegador o el dispositivo. Las m&aacute;s usadas son las de <em>safe area</em>, que indican las zonas no cubiertas por el notch o barra de navegaci&oacute;n en m&oacute;viles. Requiere <code class="bg-gray-100 px-1 font-mono">viewport-fit=cover</code> en el meta viewport.</p>
            <pre class="bg-gray-800 text-gray-100 p-3 rounded-md overflow-x-auto text-xs">/* Para pantallas con notch (iPhone, etc.) */
&lt;meta name="viewport" content="..., viewport-fit=cover"&gt;

.app {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
}

/* Con fallback si no existe la variable */
.app { padding-top: env(safe-area-inset-top, 20px); }</pre>
            <!-- Visualización de safe areas -->
            <div class="mt-3 bg-gray-50 p-3 rounded border border-gray-200 flex justify-center">
                <div class="relative bg-gray-800 rounded-2xl" style="width:100px;height:170px">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 bg-gray-900 rounded-b-lg" style="width:40px;height:12px"></div>
                    <div class="absolute border-2 border-dashed border-amber-400 rounded" style="top:16px;left:6px;right:6px;bottom:10px"></div>
                    <span class="absolute text-[7px] text-amber-400 font-mono" style="top:18px;left:50%;transform:translateX(-50%)">safe-area</span>
                    <span class="absolute text-[6px] text-gray-400" style="top:4px;left:50%;transform:translateX(-50%)">notch</span>
                </div>
            </div>
        </section>

    </main>

    <nav class="flex justify-between items-center max-w-6xl mx-auto mt-5 px-5 pb-5">
        <a href="tema2-pseudos.html" class="inline-flex items-center gap-1.5 px-4 py-2 bg-amber-900 text-white no-underline rounded text-xs hover:bg-amber-800">&larr; Tema 2</a>
        <a href="../index.html" class="inline-flex items-center gap-1.5 px-4 py-2 bg-amber-900 text-white no-underline rounded text-xs hover:bg-amber-800">&uarr; Volver al índice</a>
        <a href="tema4-color-unidades.html" class="inline-flex items-center gap-1.5 px-4 py-2 bg-amber-900 text-white no-underline rounded text-xs hover:bg-amber-800">Tema 4 &rarr;</a>
    </nav>

    <footer class="text-center py-5 text-gray-400 text-xs border-t border-gray-200 mt-4">
        <p>Apuntes CSS &mdash; Tema 3 de 12</p>
    </footer>

    <script>
        // JS para el dropdown (Mantenido igual)
        const btn = document.querySelector('.tema-dropdown button');
        const menu = document.querySelector('.tema-dropdown-menu');
        btn.addEventListener('click', () => menu.classList.toggle('hidden'));
        document.addEventListener('click', (e) => {
            if (!btn.contains(e.target)) menu.classList.add('hidden');
        });
    </script>
</body>
</html>

